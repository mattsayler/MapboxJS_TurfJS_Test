<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>A simple map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js' type="text/javascript"></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v1.3.0/turf.min.js' type="text/javascript"></script>
    <script src='Leaflet.MakiMarkers.js' type="text/javascript"></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js' type="text/javascript"></script>
    
    <script src="SampleData.geojson" type="text/javascript"></script>
    
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css' rel='stylesheet' />
    <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
    <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />
    
    <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
  </head>
  <body>
    <div id='map'></div>
    <script>
      L.mapbox.accessToken = 'pk.eyJ1IjoibXNheWxlciIsImEiOiJQVnpZOU5zIn0.h3YR_dMlhBCP2IxsU8VYcg';
      var map = L.mapbox.map('map', 'msayler.map-nscs81d9')
          .setView([45.770322, -122.530139], 11);
      
      var comp1Icon = L.MakiMarkers.icon({icon: "marker", color: "#DC143C", size: "m"});
      var comp2Icon = L.MakiMarkers.icon({icon: "marker", color: "#00CED1", size: "m"});
      var comp3Icon = L.MakiMarkers.icon({icon: "marker", color: "#DAA520", size: "m"});
      var comp4Icon = L.MakiMarkers.icon({icon: "marker", color: "#008000", size: "m"});
      var comp5Icon = L.MakiMarkers.icon({icon: "marker", color: "#9370DB", size: "m"});
      var comp6Icon = L.MakiMarkers.icon({icon: "marker", color: "#FFA07A", size: "m"});
      var comp7Icon = L.MakiMarkers.icon({icon: "marker", color: "#4682B4", size: "m"});
      var comp8Icon = L.MakiMarkers.icon({icon: "marker", color: "#FFA500", size: "m"});
      
      var iconLookup = {
        "Company1":comp1Icon,
        "Company2":comp2Icon,
        "Company3":comp3Icon,
        "Company4":comp4Icon,
        "Company5":comp5Icon,
        "Company6":comp6Icon,
        "Company7":comp7Icon,
        "Company8":comp8Icon,
      };
      
      var sampleData = L.geoJson(SampleData);
      var markers = new L.MarkerClusterGroup();
      
      for (var i = 0; i < SampleData["features"].length; i++) {
        var a = SampleData["features"][i];
        var title = a["properties"]["Owner"];
        var marker = L.marker([a["geometry"]["coordinates"][1], a["geometry"]["coordinates"][0]], 
            {icon: iconLookup[title], title: title})
          .addTo(map);
        markers.addLayer(marker);
      };
      
      map.addLayer(markers);
      
    </script>
  </body>
</html>
